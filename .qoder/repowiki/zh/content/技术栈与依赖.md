# 技术栈与依赖

<cite>
**本文档引用的文件**  
- [go.mod](file://backend/go.mod)
- [package.json](file://frontend/package.json)
- [config.go](file://backend/internal/config/config.go)
- [config_manager.go](file://backend/internal/app/config_manager.go)
- [database_manager.go](file://backend/internal/app/database_manager.go)
- [redis.go](file://backend/pkg/redis/redis.go)
- [logger.go](file://backend/pkg/logger/logger.go)
- [jwt.go](file://backend/internal/auth/jwt.go)
</cite>

## 目录
1. [后端技术栈](#后端技术栈)
2. [前端技术栈](#前端技术栈)
3. [依赖管理机制](#依赖管理机制)
4. [依赖升级与安全维护](#依赖升级与安全维护)

## 后端技术栈

qoder 项目的后端采用 Go 语言构建，具备高性能、高并发、低延迟的特性。整体架构基于模块化设计，使用 Gin 作为 Web 框架，GORM 作为 ORM 层，Viper 进行配置管理，Zap 提供结构化日志，JWT 实现认证机制，并通过 Redis 提供缓存支持。

### Go 语言与 Gin 框架
- **版本**: Go 1.23.0
- **Gin 版本**: v1.10.1

Gin 是一个高性能的 HTTP Web 框架，以其轻量级和极快的路由匹配著称。其基于 `httprouter` 实现，路由查找时间复杂度为 O(1)，在高并发场景下表现优异。Gin 提供了中间件机制、JSON 绑定、错误恢复等特性，极大提升了开发效率。

**优势**:
- 路由性能优异，适合高并发 API 服务
- 中间件生态丰富，易于扩展
- 内置 JSON 序列化与验证，开发体验良好

**Section sources**
- [go.mod](file://backend/go.mod#L5)
- [main.go](file://backend/cmd/main.go)

### GORM ORM
- **版本**: v1.31.0 (MySQL 驱动: v1.6.0)

GORM 是 Go 语言中最流行的 ORM 框架，支持多种数据库（MySQL、PostgreSQL、SQLite 等），提供模型定义、自动迁移、关联查询、钩子函数等高级功能。

**优势**:
- 支持自动结构体到数据库表的映射（AutoMigrate）
- 提供链式 API，查询语句清晰易读
- 支持事务、预加载、软删除等企业级特性

**Section sources**
- [go.mod](file://backend/go.mod#L12)
- [database_manager.go](file://backend/internal/app/database_manager.go#L15-L30)
- [model.go](file://backend/internal/model/model.go)

### Viper 配置管理
- **版本**: v1.21.0

Viper 是 Go 的配置解决方案，支持 YAML、JSON、TOML、环境变量等多种配置源。qoder 使用 `config.yaml` 文件进行配置，并通过 Viper 实现热加载与环境变量覆盖。

**优势**:
- 支持多格式配置文件
- 可自动监听环境变量（如 `DEVOPS_SERVER_PORT`）
- 支持配置热重载，无需重启服务

**Section sources**
- [go.mod](file://backend/go.mod#L8)
- [config.go](file://backend/internal/config/config.go)
- [config_manager.go](file://backend/internal/app/config_manager.go)

### Zap 日志库
- **版本**: v1.27.0

Zap 是 Uber 开源的高性能日志库，采用结构化日志设计，性能远超标准库 `log` 和 `logrus`。

**优势**:
- 高性能，低开销，适合生产环境
- 支持 JSON 和文本格式输出
- 可与文件切割工具（如 `lumberjack`）集成

**Section sources**
- [go.mod](file://backend/go.mod#L10)
- [logger.go](file://backend/pkg/logger/logger.go)

### JWT 认证
- **版本**: v5.3.0

JWT（JSON Web Token）用于实现无状态用户认证。qoder 使用 `github.com/golang-jwt/jwt/v5` 库生成和验证 Token，支持过期时间、刷新机制。

**优势**:
- 无状态，适合分布式系统
- 可携带用户信息，减少数据库查询
- 支持 HMAC 或 RSA 签名，安全性高

**Section sources**
- [go.mod](file://backend/go.mod#L7)
- [jwt.go](file://backend/internal/auth/jwt.go)

### Redis 缓存
- **版本**: v9.14.0

Redis 作为内存数据库，用于缓存用户会话、监控数据、热点查询结果等，显著降低数据库压力。

**优势**:
- 读写性能极高（微秒级响应）
- 支持 TTL 自动过期
- 可作为分布式锁、消息队列使用

**Section sources**
- [go.mod](file://backend/go.mod#L6)
- [redis.go](file://backend/pkg/redis/redis.go)

## 前端技术栈

qoder 前端采用现代化的 Vue 生态，基于 Vue3 + TypeScript 构建，具备良好的类型安全和响应式能力。

### Vue3 与 TypeScript
- **Vue 版本**: ^3.4.0
- **TypeScript 版本**: ~5.3.0

Vue3 引入了 Composition API 和 Proxy 响应式系统，相比 Vue2 性能提升显著，代码组织更灵活。TypeScript 提供静态类型检查，减少运行时错误。

**优势**:
- 响应式系统基于 Proxy，性能更好
- Composition API 更适合复杂逻辑复用
- 类型安全，提升开发效率与代码质量

**Section sources**
- [package.json](file://frontend/package.json#L10)
- [main.ts](file://frontend/src/main.ts)

### Pinia 状态管理
- **版本**: ^2.1.7

Pinia 是 Vue3 官方推荐的状态管理库，替代 Vuex，API 更简洁，支持 TypeScript 泛型。

**优势**:
- 轻量级，API 简洁
- 支持模块化组织状态
- 与 Vue Devtools 深度集成

**Section sources**
- [package.json](file://frontend/package.json#L12)
- [user.ts](file://frontend/src/store/user.ts)

### Element Plus 组件库
- **版本**: ^2.4.4

Element Plus 是基于 Vue3 的桌面端组件库，提供丰富的 UI 组件（表格、表单、对话框等），支持主题定制。

**优势**:
- 组件丰富，开箱即用
- 支持暗色主题与国际化
- 文档完善，社区活跃

**Section sources**
- [package.json](file://frontend/package.json#L14)

### Axios 与 ECharts
- **Axios 版本**: ^1.6.2
- **ECharts 版本**: ^5.4.3

Axios 用于发送 HTTP 请求，支持拦截器、请求取消、自动 JSON 转换。ECharts 是百度开源的可视化图表库，用于展示监控数据、部署趋势等。

**优势**:
- Axios 轻量、易用，支持 Promise
- ECharts 图表类型丰富，交互性强
- 支持响应式布局与动态更新

**Section sources**
- [package.json](file://frontend/package.json#L13-L15)
- [request.ts](file://frontend/src/api/request.ts)
- [DashboardView.vue](file://frontend/src/views/DashboardView.vue)

## 依赖管理机制

### Go Modules
后端使用 Go Modules 进行依赖管理，`go.mod` 文件定义了所有直接依赖及其版本。Go Modules 支持语义化版本控制、依赖锁定（`go.sum`）和模块代理。

**使用方式**:
```bash
# 初始化模块
go mod init devops

# 添加依赖
go get github.com/gin-gonic/gin@v1.10.1

# 整理依赖（移除未使用项）
go mod tidy
```

**Section sources**
- [go.mod](file://backend/go.mod)

### npm / yarn
前端使用 `package.json` 管理依赖，推荐使用 `npm` 或 `yarn` 安装。

**使用方式**:
```bash
# 安装依赖
npm install

# 添加依赖
npm install axios

# 更新依赖
npm update
```

**Section sources**
- [package.json](file://frontend/package.json)

## 依赖升级与安全维护

### 升级策略
- **Go 依赖**: 使用 `go get -u` 更新至最新兼容版本，结合 `go mod tidy` 清理。
- **前端依赖**: 使用 `npm outdated` 查看可升级项，`npm update` 执行升级。

### 安全建议
1. **定期扫描漏洞**:
   - Go: 使用 `govulncheck` 检测已知漏洞
   - JavaScript: 使用 `npm audit` 检查安全问题
2. **锁定生产依赖版本**:
   - 避免使用 `^` 或 `~` 在生产环境中，建议锁定精确版本
3. **审查间接依赖**:
   - 定期检查 `go.mod` 和 `package-lock.json` 中的间接依赖
4. **自动化 CI 检查**:
   - 在 CI 流程中加入依赖安全扫描步骤

**Section sources**
- [go.mod](file://backend/go.mod)
- [package.json](file://frontend/package.json)
- [package-lock.json](file://frontend/package-lock.json)